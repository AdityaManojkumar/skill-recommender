<!DOCTYPE html>
<html>
<head>
    <title>Skill Selector</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="mb-4">Select Your Skills</h1>
        <form action="/save-skills" method="POST">
            <div class="mb-3">
                <% const allSkills = [
                    "Mathematics", "Physics", "Chemistry", "Data Structures", "Algorithms",
                    "Operating Systems", "Database Systems", "Computer Networks", "Software Engineering",
                    "Machine Learning", "Artificial Intelligence", "Web Development",
                    "Mobile App Development", "Cloud Computing", "Cyber Security", "Blockchain",
                    "Microprocessors", "Embedded Systems", "Digital Electronics", "Control Systems"
                ]; %>
                <% allSkills.forEach(skill => { %>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="skills" value="<%= skill %>">
                        <label class="form-check-label"><%= skill %></label>
                    </div>
                <% }); %>
            </div>
            <button type="submit" class="btn btn-primary">Save Selected Skills</button>
        </form>

        <hr>

        <h2 class="mt-4">Your Saved Skills:</h2>
        <% if (skills && skills.length > 0) { %>
            <ul class="list-group">
                <% skills.forEach(skill => { %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <%= skill %>
                        <form action="/delete-skill" method="POST" style="display:inline;">
                            <input type="hidden" name="skill" value="<%= skill %>">
                            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p class="text-muted">No skills saved yet.</p>
        <% } %>
    </div>
    <h2>Chat with our Project Helper ðŸ¤–</h2>
<div id="chatbox" style="border:1px solid #ccc; padding:10px; height:200px; overflow:auto;"></div>
<input type="text" id="chat-input" placeholder="Ask me something..." style="width:100%; padding:10px;"/>

<h3>Get LeetCode Questions Based on Skill</h3>
<button onclick="fetchLeetcode('javascript')">JavaScript</button>
<button onclick="fetchLeetcode('python')">Python</button>
<button onclick="fetchLeetcode('java')">Java</button>
<div id="leetcode" style="margin-top: 10px;"></div>
<script src="/chatbot.js"></script>
<script>
  async function fetchLeetcode(skill) {
    const res = await fetch(`/leetcode/${skill}`);
    const questions = await res.json();
    document.getElementById("leetcode").innerHTML =
      "<ul>" + questions.map(q => `<li>${q}</li>`).join("") + "</ul>";
  }
</script>

</body>
</html>
